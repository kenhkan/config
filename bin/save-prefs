#!/usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PREF_DIR=$HOME/Library
PREFS_PATH="$DIR/../etc/prefs.txt"
OUTPUT_NAME=prefs.tar.gz
TEMP_NAME=prefs
TEMP_DIR=/tmp/$TEMP_NAME

rm -r $TEMP_DIR
mkdir $TEMP_DIR

while read filename
do
  cp "$PREF_DIR/$filename" "$TEMP_DIR/$filename"
done < $PREFS_PATH

$(cd /tmp; tar -zcvf $HOME/s/w/$OUTPUT_NAME $TEMP_NAME)
